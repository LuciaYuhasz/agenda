extends ../../layout.pug

block contenido
  button.btn.btn-secondary#btn-volver(type="button" onclick="history.back()") ← Volver atrás
  .container
    html(lang="es")
      head
        title Registro - Agenda Médica
        link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css", rel="stylesheet")
        style.
          body {
            background-color: #f8f9fa;
          }
          .register-container {
            max-width: 500px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.2);
          }
      body
        .container
          .register-container
            h1.text-center.mb-4 Registro Paciente
            form(action="/register" method="POST" enctype="multipart/form-data")
            
              .mb-3
                label(for="email" class="form-label") Email:
                input(type="email" class="form-control" name="email" required)
              .mb-3
                label(for="password" class="form-label") Contraseña:
                input(type="password" class="form-control" name="password" required)

              // Campo oculto para rol de paciente
              input(type="hidden" name="id_rol" value="2")

              .paciente-fields
                .mb-3
                  label(for="nombre" class="form-label") Nombre:
                  input(type="text" class="form-control" name="nombre" required)
                .mb-3
                  label(for="apellido" class="form-label") Apellido:
                  input(type="text" class="form-control" name="apellido" required)
                .mb-3
                  label(for="dni" class="form-label") DNI:
                  input(type="text" class="form-control" name="dni" required)
                .mb-3
                  label(for="obra_social" class="form-label") Obra Social:
                  select(name="obra_social" class="form-select" required)
                    option(value="") Selecciona una obra social
                    each obra in obrasSociales
                      option(value=obra.id_obra_social)= obra.nombre
                .mb-3
                  label(for="telefono" class="form-label") Teléfono:
                  input(type="text" class="form-control" name="telefono" required)
                .mb-3
                  label(for="foto_dni" class="form-label") Foto del DNI:
                  input(type="file" class="form-control" name="foto_dni" accept="image/*" required)
              button(type="submit" class="btn btn-primary w-100") Registrar
            p.text-center.mt-3
              | ¿Ya tienes cuenta? 
              a(href="/login" class="text-decoration-none") Inicia sesión aquí


